# 総合トレーニングアプリ拡張 要件定義書

## 1. 概要
既存のFTP（サイクリング）トレーニングアプリを、筋トレと柔軟性トレーニングを含む総合的なフィットネス管理アプリに拡張する。

## 2. 機能要件

### 2.1 トレーニング種別の拡張
- **筋トレ記録機能**
  - 複数のエクササイズを1つのワークアウトに記録可能
  - 各エクササイズで以下を記録：
    - エクササイズ名（プリセット＋カスタム）
    - セット数
    - レップ数
    - 重量（kg）
    - メモ（任意）
  - PR（Personal Record）の自動検出と表示

- **柔軟性トレーニング記録機能**
  - 以下の数値を記録：
    - 前屈距離（cm）：-30〜+30cmの範囲
    - 左開脚角度（度）：0〜180度
    - 右開脚角度（度）：0〜180度
    - 実施時間（分）
    - メモ（任意）
  - スライダーUIによる直感的な入力

- **サイクリング記録機能（既存機能の改良）**
  - 既存のDailyLogモデルとの統合
  - 強度タイプの追加（Recovery、Endurance、Tempo、SST、VO2 Max等）

### 2.2 今日のタスク機能
- **自動提案**
  - アプリ起動時に「今日のトレーニング」を自動表示
  - 週次テンプレートに基づいたタスク提案
  - 曜日ごとの設定（例：月曜Push筋トレ、水曜バイクSST等）
  
- **簡単記録**
  - 提案されたメニューをワンタップで「✔️やった」記録
  - クイック記録モード：タップのみで完了
  - フル記録モード：詳細データも入力
  - 詳細は後から追加・編集可能

### 2.3 ダッシュボード機能
- 3種類のトレーニング（サイクリング、筋トレ、柔軟性）の進捗を一覧表示
- 週次・月次の達成率表示（例：筋トレ4/4、バイク2/3、柔軟6/7）
- 今週の進捗レポート自動生成
- 視覚的な達成感（プログレスバー、パーセンテージ等）

### 2.4 インテリジェント提案機能
- **自動調整**
  - 前週の達成率に基づくメニュー自動調整
  - パフォーマンス向上時の強度提案（例：「SST +5W上げてみる？」）
  - 未達成時の代替案提示（例：「雨で自転車できなかった分、柔軟性を増やしました」）
  
- **モチベーション機能**
  - PR達成時のバッジ表示 🎖
  - 進捗の具体的な表示（例：「開脚あと30度で目標達成！」）
  - 週次サマリーでの励ましコメント
  - 目標に基づいた励まし（例：「このペースなら富士ヒル ブロンズ余裕！」）

### 2.5 進捗管理機能
- **グラフ表示**
  - 体重推移（既存）
  - パワー/W/kg推移（既存＋改良）
  - 柔軟性の改善推移（新規）
  - 筋トレの重量推移（新規）
  - 各グラフに目標ラインと進捗コメント表示

- **週次レポート機能**
  - 各トレーニングの達成率と実績
  - 数値の変化（体重-0.4kg、FTP+8W、開脚+10度等）
  - 良かった点と改善点の自動分析
  - 次週の推奨メニュー自動生成

### 2.6 テンプレート機能
- 週次トレーニングテンプレートの作成・編集
- 曜日ごとのトレーニング設定
  - 例：月曜Push筋トレ、火曜柔軟、水曜バイクSST等
- テンプレートからの自動スケジュール生成
- 達成状況に応じた自動微調整

## 3. 非機能要件

### 3.1 ユーザビリティ
- ワンタップでワークアウトを完了できる
- 入力の手間を最小限に抑える（提案→タップ→完了）
- 視覚的なフィードバック（バッジ、グラフ、絵文字等）
- 習慣化を促すUX（朝の通知、夜のサマリー等）
- 数字と感情をセットで表示（グラフ＋コメント）

### 3.2 データ永続性
- SwiftDataを使用したローカルデータ保存
- 既存データとの互換性維持

### 3.3 パフォーマンス
- アプリの起動時間：3秒以内
- 画面遷移：スムーズでラグなし

## 4. 技術要件
- iOS 18.5以上対応
- SwiftUI使用
- SwiftData使用
- Chartsフレームワーク使用
- Xcodeプロジェクトファイル（.xcodeproj）の自動更新

## 5. 将来の拡張性
- HealthKit連携の準備
- 通知機能の追加準備
- データエクスポート機能の準備