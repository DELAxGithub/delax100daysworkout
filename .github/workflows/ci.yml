name: ðŸš€ Main CI Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:

jobs:
  build:
    name: ðŸ—ï¸ Build & Compile
    uses: ./.github/workflows/build.yml
    
  test:
    name: ðŸ§ª Automated Tests
    uses: ./.github/workflows/test.yml
    needs: build
    
  quality:
    name: ðŸ›¡ï¸ Quality Gates  
    uses: ./.github/workflows/quality.yml
    needs: build
    
  performance:
    name: âš¡ Performance Check
    uses: ./.github/workflows/performance.yml
    needs: build
    
  summary:
    name: ðŸ“Š Pipeline Summary
    runs-on: macos-14
    needs: [build, test, quality, performance]
    if: always()
    
    steps:
    - name: ðŸ“‹ Generate Report
      run: |
        echo "# ðŸš€ CI/CD Pipeline Results" >> $GITHUB_STEP_SUMMARY
        echo "## Issue #76: Build Pipeline Enhancement" >> $GITHUB_STEP_SUMMARY
        echo "- **Build**: ${{ needs.build.result }}" >> $GITHUB_STEP_SUMMARY
        echo "- **Tests**: ${{ needs.test.result }}" >> $GITHUB_STEP_SUMMARY
        echo "- **Quality**: ${{ needs.quality.result }}" >> $GITHUB_STEP_SUMMARY
        echo "- **Performance**: ${{ needs.performance.result }}" >> $GITHUB_STEP_SUMMARY
        echo "## ðŸŽ¯ Enterprise-Grade CI/CD Successfully Deployed!" >> $GITHUB_STEP_SUMMARY